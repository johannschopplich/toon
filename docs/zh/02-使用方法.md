# TOON ä½¿ç”¨æ–¹æ³•

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨é¡¹ç›®ä¸­å®‰è£…å’Œä½¿ç”¨ TOONã€‚

## å®‰è£…

### npm
```bash
npm install @byjohann/toon
```

### pnpm
```bash
pnpm add @byjohann/toon
```

### yarn
```bash
yarn add @byjohann/toon
```

## åŸºç¡€ä½¿ç”¨

### å¿«é€Ÿå¼€å§‹

```typescript
import { encode } from '@byjohann/toon'

const data = {
  user: {
    id: 123,
    name: 'Ada',
    tags: ['reading', 'gaming'],
    active: true,
    preferences: []
  }
}

console.log(encode(data))
```

è¾“å‡ºï¼š
```
user:
  id: 123
  name: Ada
  tags[2]: reading,gaming
  active: true
  preferences[0]:
```

## æ ¼å¼è¯¦è§£

### 1. å¯¹è±¡ï¼ˆObjectsï¼‰

#### ç®€å•å¯¹è±¡

åŒ…å«åŸå§‹å€¼çš„å¯¹è±¡ï¼š

```typescript
encode({
  id: 123,
  name: 'Ada',
  active: true
})
```

è¾“å‡ºï¼š
```
id: 123
name: Ada
active: true
```

#### åµŒå¥—å¯¹è±¡

```typescript
encode({
  user: {
    id: 123,
    name: 'Ada'
  }
})
```

è¾“å‡ºï¼š
```
user:
  id: 123
  name: Ada
```

#### ç©ºå¯¹è±¡

```typescript
encode({})                    // ç©ºè¾“å‡º
encode({ config: {} })        // config:
```

### 2. æ•°ç»„ï¼ˆArraysï¼‰

TOON å¯¹æ•°ç»„æœ‰å¤šç§ç¼–ç æ–¹å¼ï¼Œæ ¹æ®æ•°ç»„å†…å®¹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ ¼å¼ã€‚

#### åŸå§‹å€¼æ•°ç»„ï¼ˆå†…è”æ ¼å¼ï¼‰

```typescript
encode({
  tags: ['admin', 'ops', 'dev']
})
```

è¾“å‡ºï¼š
```
tags[3]: admin,ops,dev
```

**è¯´æ˜**ï¼š
- `[3]` è¡¨ç¤ºæ•°ç»„é•¿åº¦
- ä½¿ç”¨é€—å·åˆ†éš”å€¼ï¼ˆé»˜è®¤åˆ†éš”ç¬¦ï¼‰

#### ç©ºæ•°ç»„

```typescript
encode({ items: [] })
```

è¾“å‡ºï¼š
```
items[0]:
```

#### å¯¹è±¡æ•°ç»„ï¼ˆè¡¨æ ¼æ ¼å¼ï¼‰

å½“æ‰€æœ‰å¯¹è±¡å…·æœ‰ç›¸åŒçš„åŸå§‹å€¼å­—æ®µæ—¶ï¼Œä½¿ç”¨é«˜æ•ˆçš„**è¡¨æ ¼æ ¼å¼**ï¼š

```typescript
encode({
  items: [
    { sku: 'A1', qty: 2, price: 9.99 },
    { sku: 'B2', qty: 1, price: 14.5 }
  ]
})
```

è¾“å‡ºï¼š
```
items[2]{sku,qty,price}:
  A1,2,9.99
  B2,1,14.5
```

**è¡¨æ ¼æ ¼å¼è¦æ±‚**ï¼š
- æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯¹è±¡
- æ‰€æœ‰å¯¹è±¡å…·æœ‰ç›¸åŒçš„é”®é›†åˆ
- æ‰€æœ‰å€¼éƒ½æ˜¯åŸå§‹ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€nullï¼‰

**è¡¨æ ¼æ ¼å¼ä¼˜åŠ¿**ï¼š
- å­—æ®µååªå£°æ˜ä¸€æ¬¡
- æ¯è¡ŒåªåŒ…å«å€¼ï¼Œå¤§å¹…å‡å°‘ token

#### åµŒå¥—çš„è¡¨æ ¼æ ¼å¼

è¡¨æ ¼æ ¼å¼å¯ä»¥é€’å½’åº”ç”¨ï¼š

```typescript
encode({
  items: [
    {
      users: [
        { id: 1, name: 'Ada' },
        { id: 2, name: 'Bob' }
      ],
      status: 'active'
    }
  ]
})
```

è¾“å‡ºï¼š
```
items[1]:
  - users[2]{id,name}:
    1,Ada
    2,Bob
    status: active
```

#### éç»Ÿä¸€æ•°ç»„ï¼ˆåˆ—è¡¨æ ¼å¼ï¼‰

ä¸æ»¡è¶³è¡¨æ ¼æ ¼å¼è¦æ±‚çš„æ•°ç»„ä½¿ç”¨åˆ—è¡¨æ ¼å¼ï¼š

```typescript
encode({
  items: [
    { id: 1, name: 'First' },
    { id: 2, name: 'Second', extra: true }
  ]
})
```

è¾“å‡ºï¼š
```
items[2]:
  - id: 1
    name: First
  - id: 2
    name: Second
    extra: true
```

**æ³¨æ„**ï¼šå½“å¯¹è±¡å‡ºç°åœ¨åˆ—è¡¨æ ¼å¼ä¸­æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—æ®µæ”¾åœ¨è¿å­—ç¬¦è¡Œä¸Šã€‚

#### æ··åˆç±»å‹æ•°ç»„

```typescript
encode({
  items: [1, { a: 1 }, 'text']
})
```

è¾“å‡ºï¼š
```
items[3]:
  - 1
  - a: 1
  - text
```

#### æ•°ç»„çš„æ•°ç»„

```typescript
encode({
  pairs: [
    [1, 2],
    [3, 4]
  ]
})
```

è¾“å‡ºï¼š
```
pairs[2]:
  - [2]: 1,2
  - [2]: 3,4
```

#### æ ¹æ•°ç»„

å¦‚æœé¡¶å±‚å°±æ˜¯æ•°ç»„ï¼š

```typescript
encode(['x', 'y'])
```

è¾“å‡ºï¼š
```
[2]: x,y
```

### 3. å¼•å·è§„åˆ™

TOON **ä»…åœ¨å¿…è¦æ—¶**æ‰ç»™å­—ç¬¦ä¸²åŠ å¼•å·ï¼Œä»¥æœ€å¤§åŒ– token æ•ˆç‡ã€‚

#### ä¸éœ€è¦å¼•å·çš„æƒ…å†µ

```typescript
encode({
  text: 'hello world',       // å†…éƒ¨ç©ºæ ¼å¯ä»¥
  emoji: 'hello ğŸ‘‹ world',   // Unicode å’Œ emoji å¯ä»¥
  chinese: 'ä½ å¥½ä¸–ç•Œ'         // ä¸­æ–‡å­—ç¬¦å¯ä»¥
})
```

è¾“å‡ºï¼š
```
text: hello world
emoji: hello ğŸ‘‹ world
chinese: ä½ å¥½ä¸–ç•Œ
```

#### éœ€è¦å¼•å·çš„æƒ…å†µ

å­—ç¬¦ä¸²åœ¨ä»¥ä¸‹æƒ…å†µä¸‹**å¿…é¡»**åŠ å¼•å·ï¼š

| æ¡ä»¶ | ç¤ºä¾‹ |
|------|------|
| ç©ºå­—ç¬¦ä¸² | `""` |
| å‰å¯¼æˆ–å°¾éšç©ºæ ¼ | `" padded "`, `"  "` |
| åŒ…å«æ´»åŠ¨åˆ†éš”ç¬¦ã€å†’å·ã€å¼•å·ã€åæ–œæ æˆ–æ§åˆ¶å­—ç¬¦ | `"a,b"`, `"a:b"`, `"say \"hi\""`, `"C:\\Users"` |
| çœ‹èµ·æ¥åƒå¸ƒå°”å€¼/æ•°å­—/null | `"true"`, `"false"`, `"null"`, `"42"`, `"-3.14"` |
| ä»¥ `"- "` å¼€å¤´ï¼ˆç±»ä¼¼åˆ—è¡¨ï¼‰ | `"- item"` |
| çœ‹èµ·æ¥åƒç»“æ„æ ‡è®° | `"[5]"`, `"{key}"` |

```typescript
encode({
  empty: '',
  spaced: ' padded ',
  withComma: 'a,b',
  withColon: 'key:value',
  likeBoolean: 'true',
  likeNumber: '42'
})
```

è¾“å‡ºï¼š
```
empty: ""
spaced: " padded "
withComma: "a,b"
withColon: "key:value"
likeBoolean: "true"
likeNumber: "42"
```

#### å¯¹è±¡é”®çš„å¼•å·è§„åˆ™

å¯¹è±¡é”®å¦‚æœæ˜¯æœ‰æ•ˆæ ‡è¯†ç¬¦ï¼ˆä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåè·Ÿå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿æˆ–ç‚¹ï¼‰ï¼Œå¯ä»¥ä¸åŠ å¼•å·ï¼š

```typescript
encode({
  id: 1,                    // ä¸éœ€è¦å¼•å·
  userName: 'Ada',          // ä¸éœ€è¦å¼•å·
  user_name: 'Ada',         // ä¸éœ€è¦å¼•å·
  'user name': 'Ada',       // éœ€è¦å¼•å·ï¼ˆåŒ…å«ç©ºæ ¼ï¼‰
  'order-id': 1,            // éœ€è¦å¼•å·ï¼ˆåŒ…å«è¿å­—ç¬¦ï¼‰
  '123': 1,                 // éœ€è¦å¼•å·ï¼ˆä»¥æ•°å­—å¼€å¤´ï¼‰
})
```

è¾“å‡ºï¼š
```
id: 1
userName: Ada
user_name: Ada
"user name": Ada
"order-id": 1
"123": 1
```

### 4. è½¬ä¹‰è§„åˆ™

åœ¨å¼•å·å­—ç¬¦ä¸²ä¸­ï¼Œä»¥ä¸‹å­—ç¬¦éœ€è¦è½¬ä¹‰ï¼š

| å­—ç¬¦ | è½¬ä¹‰å½¢å¼ |
|------|---------|
| åæ–œæ  `\` | `\\` |
| åŒå¼•å· `"` | `\"` |
| æ¢è¡Œç¬¦ | `\n` |
| å›è½¦ç¬¦ | `\r` |
| åˆ¶è¡¨ç¬¦ | `\t` |

```typescript
encode({
  path: 'C:\\Users\\Ada',
  quote: 'He said "Hello"',
  multiline: 'Line 1\nLine 2'
})
```

è¾“å‡ºï¼š
```
path: "C:\\Users\\Ada"
quote: "He said \"Hello\""
multiline: "Line 1\nLine 2"
```

## é«˜çº§é€‰é¡¹

### API ç­¾å

```typescript
function encode(value: unknown, options?: EncodeOptions): string

interface EncodeOptions {
  indent?: number           // æ¯çº§ç¼©è¿›çš„ç©ºæ ¼æ•°ï¼Œé»˜è®¤ 2
  delimiter?: ',' | '\t' | '|'  // åˆ†éš”ç¬¦ï¼Œé»˜è®¤é€—å·
  lengthMarker?: '#' | false    // é•¿åº¦æ ‡è®°ï¼Œé»˜è®¤ false
}
```

### è‡ªå®šä¹‰ç¼©è¿›

```typescript
// é»˜è®¤ä½¿ç”¨ 2 ä¸ªç©ºæ ¼
encode(data)

// ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›
encode(data, { indent: 4 })
```

### è‡ªå®šä¹‰åˆ†éš”ç¬¦

#### é€—å·åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ï¼‰

```typescript
const data = {
  items: [
    { sku: 'A1', name: 'Widget', qty: 2 },
    { sku: 'B2', name: 'Gadget', qty: 1 }
  ]
}

encode(data)
// æˆ–æ˜¾å¼æŒ‡å®š
encode(data, { delimiter: ',' })
```

è¾“å‡ºï¼š
```
items[2]{sku,name,qty}:
  A1,Widget,2
  B2,Gadget,1
```

#### åˆ¶è¡¨ç¬¦åˆ†éš”ç¬¦

ä½¿ç”¨åˆ¶è¡¨ç¬¦å¯ä»¥è¿›ä¸€æ­¥å‡å°‘ tokenï¼š

```typescript
encode(data, { delimiter: '\t' })
```

è¾“å‡ºï¼ˆåˆ¶è¡¨ç¬¦åœ¨å¤´éƒ¨æ˜¾å¼æ ‡è®°ï¼‰ï¼š
```
items[2	]{sku	name	qty}:
  A1	Widget	2
  B2	Gadget	1
```

**ä¼˜åŠ¿**ï¼š
- åˆ¶è¡¨ç¬¦æ˜¯å•ä¸ªå­—ç¬¦ï¼Œtokenize æ›´é«˜æ•ˆ
- è‡ªç„¶æ–‡æœ¬ä¸­å¾ˆå°‘å‡ºç°åˆ¶è¡¨ç¬¦ï¼Œå‡å°‘è½¬ä¹‰éœ€æ±‚
- åˆ†éš”ç¬¦åœ¨å¤´éƒ¨æ˜ç¡®ç¼–ç ï¼Œè‡ªæ–‡æ¡£åŒ–

**æ³¨æ„äº‹é¡¹**ï¼š
- æŸäº›ç»ˆç«¯å’Œç¼–è¾‘å™¨å¯èƒ½ä¼šæ”¹å˜åˆ¶è¡¨ç¬¦çš„æ˜¾ç¤ºå®½åº¦
- åŒ…å«åˆ¶è¡¨ç¬¦çš„å­—ç¬¦ä¸²å€¼ä»éœ€è¦å¼•å·

#### ç®¡é“åˆ†éš”ç¬¦

ç®¡é“ç¬¦æä¾›äº†é€—å·å’Œåˆ¶è¡¨ç¬¦ä¹‹é—´çš„ä¸­é—´é€‰æ‹©ï¼š

```typescript
encode(data, { delimiter: '|' })
```

è¾“å‡ºï¼š
```
items[2|]{sku|name|qty}:
  A1|Widget|2
  B2|Gadget|1
```

#### åˆ†éš”ç¬¦æ„ŸçŸ¥å¼•å·

é‡è¦ç‰¹æ€§ï¼šä½¿ç”¨ä¸åŒåˆ†éš”ç¬¦æ—¶ï¼Œå¼•å·è§„åˆ™ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚

```typescript
const data = { text: 'hello, world' }

// ä½¿ç”¨é€—å·åˆ†éš”ç¬¦ - éœ€è¦å¼•å·
encode(data, { delimiter: ',' })
// text: "hello, world"

// ä½¿ç”¨åˆ¶è¡¨ç¬¦åˆ†éš”ç¬¦ - ä¸éœ€è¦å¼•å·ï¼ˆé€—å·ä¸å†æ˜¯æ´»åŠ¨åˆ†éš”ç¬¦ï¼‰
encode(data, { delimiter: '\t' })
// text: hello, world

// ä½¿ç”¨ç®¡é“åˆ†éš”ç¬¦ - ä¸éœ€è¦å¼•å·
encode(data, { delimiter: '|' })
// text: hello, world
```

### é•¿åº¦æ ‡è®°é€‰é¡¹

æ·»åŠ  `#` å‰ç¼€æ¥å¼ºè°ƒæ•°ç»„é•¿åº¦æ˜¯è®¡æ•°å€¼è€Œéç´¢å¼•ï¼š

```typescript
const data = {
  tags: ['reading', 'gaming', 'coding'],
  items: [
    { sku: 'A1', qty: 2, price: 9.99 },
    { sku: 'B2', qty: 1, price: 14.5 }
  ]
}

encode(data, { lengthMarker: '#' })
```

è¾“å‡ºï¼š
```
tags[#3]: reading,gaming,coding
items[#2]{sku,qty,price}:
  A1,2,9.99
  B2,1,14.5
```

å¯ä»¥ä¸è‡ªå®šä¹‰åˆ†éš”ç¬¦ç»“åˆä½¿ç”¨ï¼š

```typescript
encode(data, { lengthMarker: '#', delimiter: '|' })
```

è¾“å‡ºï¼š
```
tags[#3|]: reading|gaming|coding
items[#2|]{sku|qty|price}:
  A1|2|9.99
  B2|1|14.5
```

## ç±»å‹è½¬æ¢

TOON ä¼šè‡ªåŠ¨å°†æŸäº›é JSON ç±»å‹è½¬æ¢ä¸º LLM å®‰å…¨çš„è¾“å‡ºï¼š

| è¾“å…¥ç±»å‹ | è¾“å‡º | ç¤ºä¾‹ |
|---------|------|------|
| æœ‰é™æ•°å­— | åè¿›åˆ¶å½¢å¼ | `1e6` â†’ `1000000`<br>`-0` â†’ `0` |
| NaN, Â±Infinity | `null` | `NaN` â†’ `null` |
| BigInt | åè¿›åˆ¶æ•°å­—å­—ç¬¦ä¸² | `9007199254740993n` â†’ `"9007199254740993"` |
| Date | ISO å­—ç¬¦ä¸² | `new Date('2025-01-01')` â†’ `"2025-01-01T00:00:00.000Z"` |
| undefined | `null` | `undefined` â†’ `null` |
| function | `null` | `() => {}` â†’ `null` |
| symbol | `null` | `Symbol()` â†’ `null` |
| Set | æ•°ç»„ | `new Set([1, 2])` â†’ `[2]: 1,2` |
| Map | å¯¹è±¡ | `new Map([['a', 1]])` â†’ `a: 1` |

ç¤ºä¾‹ï¼š

```typescript
encode({
  count: 1e6,
  negative_zero: -0,
  invalid: NaN,
  big: 9007199254740993n,
  timestamp: new Date('2025-01-01'),
  missing: undefined,
  fn: () => {},
  tags: new Set(['a', 'b']),
  config: new Map([['key', 'value']])
})
```

è¾“å‡ºï¼š
```
count: 1000000
negative_zero: 0
invalid: null
big: "9007199254740993"
timestamp: "2025-01-01T00:00:00.000Z"
missing: null
fn: null
tags[2]: a,b
config:
  key: value
```

## åœ¨ LLM æç¤ºä¸­ä½¿ç”¨ TOON

### å‘ LLM å‘é€æ•°æ®ï¼ˆè¾“å…¥ï¼‰

å°†ç¼–ç åçš„æ•°æ®åŒ…è£…åœ¨ä»£ç å—ä¸­ï¼ˆå»ºè®®æ ‡è®°ä¸º \`\`\`toonï¼‰ï¼š

````markdown
æ•°æ®é‡‡ç”¨ TOON æ ¼å¼ï¼ˆ2 ç©ºæ ¼ç¼©è¿›ï¼Œæ•°ç»„æ˜¾ç¤ºé•¿åº¦å’Œå­—æ®µï¼‰ã€‚

```toon
users[3]{id,name,role,lastLogin}:
  1,Alice,admin,2025-01-15T10:30:00Z
  2,Bob,user,2025-01-14T15:22:00Z
  3,Charlie,user,2025-01-13T09:45:00Z
```

è¯·æ‰¾å‡ºæ‰€æœ‰ role ä¸º "user" çš„ç”¨æˆ·ã€‚
````

### è®© LLM ç”Ÿæˆ TOONï¼ˆè¾“å‡ºï¼‰

å¦‚æœéœ€è¦ LLM **ç”Ÿæˆ** TOON æ ¼å¼çš„æ•°æ®ï¼Œéœ€è¦æ›´æ˜ç¡®çš„æŒ‡ç¤ºï¼š

````markdown
è¯·å°†ç»“æœä»¥ TOON æ ¼å¼è¿”å›ã€‚è§„åˆ™ï¼š
- 2 ç©ºæ ¼ç¼©è¿›
- æ— è¡Œå°¾ç©ºæ ¼
- [N] å¿…é¡»åŒ¹é…è¡Œæ•°

ä½¿ç”¨æ­¤å¤´éƒ¨æ ¼å¼ï¼š
```
users[N]{id,name,role}:
```

ä»»åŠ¡ï¼šè¿”å› role ä¸º "user" çš„ç”¨æˆ·ã€‚åªè¾“å‡ºä»£ç å—ã€‚
````

### ä½¿ç”¨åˆ¶è¡¨ç¬¦ä¼˜åŒ–

å¯¹äºå¤§å‹ç»Ÿä¸€è¡¨æ ¼ï¼Œä½¿ç”¨åˆ¶è¡¨ç¬¦å¯ä»¥è·å¾—æ›´å¥½çš„ token æ•ˆç‡ï¼š

```typescript
const largeData = {
  employees: [/* ... å¤§é‡å‘˜å·¥æ•°æ® ... */]
}

const toonOutput = encode(largeData, { delimiter: '\t' })
```

åœ¨æç¤ºä¸­å‘Šè¯‰æ¨¡å‹ï¼š

````markdown
æ•°æ®é‡‡ç”¨ TOON æ ¼å¼ï¼Œå­—æ®µä½¿ç”¨åˆ¶è¡¨ç¬¦åˆ†éš”ï¼š

```toon
[æ•°æ®å†…å®¹]
```
````

## æ ¼å¼è§„èŒƒæ€»ç»“

### ç¼©è¿›å’Œç©ºæ ¼

- æ¯çº§ç¼©è¿›ï¼š2 ä¸ªç©ºæ ¼ï¼ˆå¯é…ç½®ï¼‰
- å†’å·åï¼š`key: value` æœ‰ä¸€ä¸ªç©ºæ ¼
- æ— å°¾éšç©ºæ ¼ï¼šä»»ä½•è¡Œæœ«éƒ½ä¸åº”æœ‰ç©ºæ ¼
- æ— å°¾éšæ¢è¡Œï¼šè¾“å‡ºæœ«å°¾æ²¡æœ‰æ¢è¡Œç¬¦

### æ•°ç»„å¤´éƒ¨æ ¼å¼

- åŸå§‹æ•°ç»„ï¼š`key[N]:` æˆ– `key[N<delim>]:`
- è¡¨æ ¼æ•°ç»„ï¼š`key[N]{field1,field2}:` æˆ– `key[N<delim>]{field1<delim>field2}:`
- æ ¹æ•°ç»„ï¼š`[N]:` æˆ– `[N<delim>]:`

### åˆ—è¡¨é¡¹æ ¼å¼

- åˆ—è¡¨é¡¹æ ‡è®°ï¼šä¸¤ä¸ªç©ºæ ¼ + è¿å­—ç¬¦ + ç©ºæ ¼ï¼ˆ`"  - "`ï¼‰
- å¯¹è±¡ç¬¬ä¸€ä¸ªå­—æ®µæ”¾åœ¨è¿å­—ç¬¦è¡Œ
- åç»­å­—æ®µç›¸å¯¹è¿å­—ç¬¦ç¼©è¿›ä¸€çº§

## TypeScript ç±»å‹å®šä¹‰

```typescript
// å¯¼å‡ºçš„ç±»å‹
import type {
  JsonValue,          // JSON å€¼ç±»å‹
  JsonObject,         // JSON å¯¹è±¡ç±»å‹
  JsonArray,          // JSON æ•°ç»„ç±»å‹
  JsonPrimitive,      // JSON åŸå§‹ç±»å‹
  EncodeOptions,      // ç¼–ç é€‰é¡¹
  Delimiter,          // åˆ†éš”ç¬¦ç±»å‹
  DelimiterKey        // åˆ†éš”ç¬¦é”®ç±»å‹
} from '@byjohann/toon'

// ä½¿ç”¨ç¤ºä¾‹
const myData: JsonObject = {
  id: 1,
  name: 'Ada'
}

const options: EncodeOptions = {
  indent: 2,
  delimiter: '\t',
  lengthMarker: '#'
}
```

## å¸¸è§é—®é¢˜

### 1. TOON é€‚åˆæ‰€æœ‰åœºæ™¯å—ï¼Ÿ

ä¸æ˜¯ã€‚TOON æœ€é€‚åˆï¼š
- ç»“æ„ç»Ÿä¸€çš„å¯¹è±¡æ•°ç»„
- å‘ LLM ä¼ é€’æ•°æ®ï¼ˆè¾“å…¥ï¼‰
- éœ€è¦èŠ‚çœ token çš„åœºæ™¯

TOON ä¸é€‚åˆï¼š
- æ·±åº¦åµŒå¥—çš„å¤æ‚ç»“æ„ï¼ˆJSON å¯èƒ½æ›´å¥½ï¼‰
- API æ•°æ®ä¼ è¾“å’Œå­˜å‚¨ï¼ˆåº”ä½¿ç”¨ JSONï¼‰
- è®© LLM ç”Ÿæˆè¾“å‡ºï¼ˆé™¤éæœ‰æ˜ç¡®æŒ‡å¯¼ï¼‰

### 2. å¦‚ä½•é€‰æ‹©åˆ†éš”ç¬¦ï¼Ÿ

- **é€—å·**ï¼šé»˜è®¤é€‰æ‹©ï¼Œæœ€é€šç”¨
- **åˆ¶è¡¨ç¬¦**ï¼šæ•°æ®ä¸­å¾ˆå°‘å‡ºç°é€—å·æ—¶ï¼Œæˆ–éœ€è¦æœ€å¤§ token æ•ˆç‡æ—¶
- **ç®¡é“ç¬¦**ï¼šéœ€è¦å¯è¯»æ€§ä½†æ•°æ®åŒ…å«å¾ˆå¤šé€—å·æ—¶

### 3. Token è®¡æ•°ä¾èµ–ä»€ä¹ˆï¼Ÿ

Token è®¡æ•°å–å†³äºæ¨¡å‹çš„ tokenizerï¼š
- åŸºå‡†æµ‹è¯•ä½¿ç”¨ GPT çš„ `o200k_base` ç¼–ç 
- ä¸åŒæ¨¡å‹ï¼ˆå¦‚ SentencePieceï¼‰ä¼šæœ‰ä¸åŒçš„èŠ‚çœæ¯”ä¾‹
- å®é™…ä½¿ç”¨æ—¶å»ºè®®æ ¹æ®ç›®æ ‡æ¨¡å‹è¿›è¡Œæµ‹è¯•

### 4. TOON å¯ä»¥è§£æå—ï¼Ÿ

TOON v1 è§„èŒƒä¸»è¦å®šä¹‰ç¼–ç ï¼ˆç”Ÿæˆï¼‰è¡Œä¸ºã€‚è§£æï¼ˆdecodingï¼‰æ˜¯å¯è¡Œçš„ï¼Œä½†ä¸åœ¨ v1 è§„èŒƒèŒƒå›´å†…ã€‚ç¤¾åŒºå®ç°ä¸­å¯èƒ½åŒ…å«è§£æå™¨ã€‚

## å¿«é€Ÿå‚è€ƒ

```typescript
// å¯¹è±¡
{ id: 1, name: 'Ada' }          â†’ id: 1
                                  name: Ada

// åµŒå¥—å¯¹è±¡
{ user: { id: 1 } }             â†’ user:
                                    id: 1

// åŸå§‹æ•°ç»„ï¼ˆå†…è”ï¼‰
{ tags: ['foo', 'bar'] }        â†’ tags[2]: foo,bar

// è¡¨æ ¼æ•°ç»„ï¼ˆç»Ÿä¸€å¯¹è±¡ï¼‰
{ items: [                      â†’ items[2]{id,qty}:
  { id: 1, qty: 5 },                1,5
  { id: 2, qty: 3 }                 2,3
]}

// æ··åˆ/éç»Ÿä¸€ï¼ˆåˆ—è¡¨ï¼‰
{ items: [1, { a: 1 }, 'x'] }   â†’ items[3]:
                                    - 1
                                    - a: 1
                                    - x

// æ•°ç»„çš„æ•°ç»„
{ pairs: [[1, 2], [3, 4]] }     â†’ pairs[2]:
                                    - [2]: 1,2
                                    - [2]: 3,4

// æ ¹æ•°ç»„
['x', 'y']                      â†’ [2]: x,y

// ç©ºå®¹å™¨
{}                              â†’ ï¼ˆç©ºè¾“å‡ºï¼‰
{ items: [] }                   â†’ items[0]:

// ç‰¹æ®Šå¼•å·
{ note: 'hello, world' }        â†’ note: "hello, world"
{ items: ['true', true] }       â†’ items[2]: "true",true
```

## ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ [å®ç°åŸç†](./03-å®ç°åŸç†.md) äº†è§£ TOON çš„å†…éƒ¨å·¥ä½œæœºåˆ¶
- æŸ¥çœ‹ [é¢å¤–æ€è€ƒ](./04-é¢å¤–æ€è€ƒ.md) äº†è§£æ·±åº¦åˆ†æå’Œæœ€ä½³å®è·µ
